# PostgreSQL on MAC

## installation

```shell
brew install postgresql@14
```

ğŸ‘‰ [brew postgresql@14](https://formulae.brew.sh/formula/postgresql@14)

### ì„¤ì¹˜ ë¡œê·¸

```shell
â•­â”€ ï…¹  ï€• ~ î‚°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€î‚² âœ”  5s ï‰’  base îœ¼
â•°â”€ brew install postgresql@14
==> Downloading https://formulae.brew.sh/api/formula.jws.json
########################################################################################################################## 100.0%
==> Downloading https://formulae.brew.sh/api/cask.jws.json
########################################################################################################################## 100.0%
==> Downloading https://ghcr.io/v2/homebrew/core/postgresql/14/manifests/14.11_1
Already downloaded: /Users/swd/Library/Caches/Homebrew/downloads/cc5ce32be3ad755d6853a306c7d20db8221cceaa63708acb1937567a4ab65fda--postgresql@14-14.11_1.bottle_manifest.json
==> Fetching postgresql@14
==> Downloading https://ghcr.io/v2/homebrew/core/postgresql/14/blobs/sha256:d49e8b487d6b7e696e74ebf7d0bddbb9b8c343d7861d760a39f0a
Already downloaded: /Users/swd/Library/Caches/Homebrew/downloads/695bc5763b3ab3f65140681669c474e2b18ff40d6ff809534e5436f2105b6d90--postgresql@14--14.11_1.arm64_sonoma.bottle.tar.gz
==> Pouring postgresql@14--14.11_1.arm64_sonoma.bottle.tar.gz
==> Caveats
This formula has created a default database cluster with:
  initdb --locale=C -E UTF-8 /opt/homebrew/var/postgresql@14
For more details, read:
  https://www.postgresql.org/docs/14/app-initdb.html

To start postgresql@14 now and restart at login:
  brew services start postgresql@14
Or, if you don't want/need a background service you can just run:
  /opt/homebrew/opt/postgresql@14/bin/postgres -D /opt/homebrew/var/postgresql@14
==> Summary
ğŸº  /opt/homebrew/Cellar/postgresql@14/14.11_1: 3,319 files, 46MB
==> Running `brew cleanup postgresql@14`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
```

ë¡œê·¸ë¥¼ ì˜ ë³´ë©´ ì•„ë˜ì˜ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

#### postgresql ì„¤ì¹˜ íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œ

```shell
/Users/swd/Library/Caches/Homebrew/downloads/695bc5763b3ab3f~
```

#### postgresql ì´ ì„¤ì¹˜ëœ ë¬¼ë¦¬ì  ê²½ë¡œ

```shell
/opt/homebrew/Cellar/postgresql@14/
```

#### service ì‹œì‘/ì •ì§€

```shell
brew services start postgresql@14
brew services stop postgresql@14
/opt/homebrew/opt/postgresql@14/bin/postgres -D /opt/homebrew/var/postgresql@14
```

## uninstallation

```shell
# PostgreSQL ì„œë¹„ìŠ¤ë¥¼ ì¤‘ì§€
brew services stop postgresql@14

# PostgreSQLì„ ì œê±°
brew uninstall postgresql@14

# ì—¬ê¸°ì„œ opt í´ë”ëŠ” ê²½ë¡œ ìµœìƒë‹¨ rootì— ìˆ¨ê¹€ ì²˜ë¦¬ ë˜ì–´ìˆëŠ” í´ë”
# cmd + shift + . ë¡œ ìˆ¨ê¹€ í´ë”ì™€ íŒŒì¼ í™•ì¸ ê°€ëŠ¥
rm -rf /opt/homebrew/var/postgresql@14

# í•„ìš”í•œ ê²½ìš° PostgreSQL ê´€ë ¨ ì„¤ì • íŒŒì¼ ë° ì‚¬ìš©ì/ê·¸ë£¹ì„ ì œê±°
rm -rf /usr/local/etc/postgres*
sudo dscl . -delete /Users/postgres
sudo dscl . -delete /Groups/postgres

# ë§ˆë¬´ë¦¬
brew cleanup
```

## ì ‘ì†

```shell
psql

# ì•„ë˜ì™€ ê°™ì€ ë©”ì„¸ì§€ê°€ ë‚˜ì˜¨ë‹¤ë©´, postgresqlì´ ëŒì•„ê°€ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.
psql: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: No such file or directory
Is the server running locally and accepting connections on that socket?

brew services start postgresql@14
```

### ì ‘ì† TroubleShooting

```shell
psql: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: No such file or directory
Is the server running locally and accepting connections on that socket?

# ì´ ë©”ì„¸ì§€ëŠ” ë‹¨ìˆœíˆ postgresql ì´ ì‹¤í–‰ë˜ì§€ ì•Šì€ ê²ƒì´ ì›ì¸ì´ë‹¤.
# ì‹¤í–‰: brew services start postgresql@14
```

```shell
psql: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: FATAL:
database "<user>" does not exist

# ì •í™•í•œ ì›ì¸ì€ ëª¨ë¥´ê² ìœ¼ë‚˜, ì²˜ìŒ ì„¤ì¹˜ í›„ ì‚¬ìš©í•˜ë‹¤ê°€ ì§€ì› ë‹¤ê°€ ë‹¤ì‹œ ì„¤ì¹˜í–ˆì„ ë•Œ ì´ëŸ° ì¼ì´ ë°œìƒí•˜ì˜€ë‹¤.

# í•´ê²°ë°©ë²•
# 1. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ template1 DBì— ì ‘ì†. template1ì€ postgresê°€ ê¸°ë³¸ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” DBì´ë‹¤.
psql -d template1

# 2. ìœ„ì˜ ëª…ë ¹ì–´ë¡œ ì ‘ì†ì´ ì˜ ëœë‹¤ë©´, ë‹¤ì‹œ \q ë¡œ ë¹ ì ¸ë‚˜ì™€ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.
# psql ì ‘ì†í•œ ìƒíƒœë¡œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•ˆëœë‹¤.
createdb <user>

# 3. ë‹¤ì‹œ ì ‘ì†
psql or psql -h localhost

# 4. ì„±ê³µ!
```
