# 학습 키워드

* Node.js
* NPM(Node Package Manager)
  * package.json / package-lock.json
  * node_modules
  * npx
* ES Modules vs CommonJS

## 기본적인 개발환경 세팅하기

자바스크립트를 실행하기 위해서 필요한 것은 자바스크립트 엔진이고, 각각의 브라우저에 내장되어있다.
이것을 컴퓨터의 로컬에서 실행할 수 있도록 한 것이 Node.js 이다.
NPM(Node Package Manager)는 Node.js로 만들어진 모듈을 설치하고 관리해주는 프로그램이다.

### 0. fnm 설치

```terminal
brew install fnm
```

~/.zshrc 에 다음 추가

```terminal
eval "$(fnm env --use-on-cd)"
```

fnm 을 사용하여 노드 버전 설치(LTS 버전)

```terminal
fnm --version  # fnm 버전 확인
fnm list-remote  # fnm 설치 가능 버전 리스트 보기
fnm install --lts  # 최신 lts 버전 설치
fnm use lts-latest  # lts 버전 사용
fnm install <version>  # 특정 버전 설치
fnm default $(fnm current)  # 특정 버전 기본으로 사용

# fnm list 명령어를 확인하여 최신 설치된 lts(Long Term Support) 버전을 확인할 수 있고,
default로 설정되어있는지 확인한다.

# 2023.01.28 현재 LTS
# v20.11.0 default, lts-latest
# node version 20이상에서 parcel 설치에 이슈가 있어, v18.17.0 로 사용

fnm install v18.17.0
fnm use v18.17.0
```

#### 프로젝트 안으로 진입했을 때 node version 변경하기

* 프로젝트 안에 .node-version 파일을 생성
  * node --version > .node-version

프로젝트 밖에서 다른 node version 으로 변경하고, 다시 프로젝트로 진입하면,
node version 이 자동으로 바뀌는 것을 확인할 수 있다.

### 1. npm 패키지 준비

npm 전역 설치 및 업그레이드

```terminal
npm install -g npm
npm install -g npm@latest
```

프로젝트 내부에서 npm 초기화

```shell
npm init -y
```

### 2. 타입스크립트 설정

여기서 -D 옵션을 사용하여, 타입스트립트를 프로덕션 환경에는 설치되지 않도록 한다.
타입스크립트는 코딩을 위한 도구로 설정한다.

```shell
npm i -D typescript
npx tsc --init
```

### 3. ESLint 설정

```shell
npm i -D eslint
npx eslint --init
```

```terminal
npx eslint --init

@eslint/create-config@0.4.6
- Ok to proceed? (y) y

How would you like to use ESLint? …
- To check syntax, find problems, and enforce code style

What type of modules does your project use? …
- JavaScript modules (import/export)

Which framework does your project use? …
- React

Does your project use TypeScript?
- Yes

Where does your code run?
- Browser

How would you like to define a style for your project? …
- Use a popular style guide

Which style guide do you want to follow? …
- XO: https://github.com/xojs/eslint-config-xo-typescript

What format do you want your config file to be in? …
- JavaScript

eslint-plugin-react@latest eslint-config-xo@latest ...
? Would you like to install them now? › No / Yes
- Yes

Which package manager do you want to use? …
- npm
```

### 4. React 설치

```shell
npm i react react-dom
npm i -D @types/react @types/react-dom
```

### 5. 테스팅 도구 설치

```shell
npm i -D jest @types/jest @swc/core @swc/jest \
    jest-environment-jsdom \
    @testing-library/react @testing-library/jest-dom@5.16.4
```

### 6. Parcel 설치

Parcel 는 Webpack 과 함께 bundler 시장의 점유율을 나눠갖고 있는 모듈 번들러라고 한다.
번들러란 dependency가 있는 자바스크립트 파일을 최적화 및 압축하여 하나 혹은 여러개의 static 파일로
빌드해주는 컴파일러이다. Webpack 을 사용하는 것보다 장점이 있다고 한다. Parcel 는 별도의 문서에서
정리하도록 한다.

```shell
npm i -D parcel
```

### 7. parcel-reporter-static-files-copy 설치

```terminal
npm install -D parcel-reporter-static-files-copy
```

### ETC

#### .gitignore 파일 생성

[gitignore.io 바로가기](https://www.toptal.com/developers/gitignore)
.gitignore.io 에서 react macOS 키워드를 넣어서 생성한 내용에 아래를 추가

```terminal
...
/dist/
/.parcel-cache/
```

#### tsconfig.json 수정

```terminal
수정 전: // "jsx": "preserve",
수정 후: "jsx": "react-jsx",
```

#### .eslintrc.js 수정

```terminal
# .eslintrc.js 파일 수정
env: {
  browser: true,
  es2021: true,
  jest: true,  # 추가됨
},
extends: [
  'xo',
  'plugin:react/recommended',
  'plugin:react/jsx-runtime',  # 추가됨
],
```

#### .eslintignore 파일 작성

```terminal
# .eslintignore 파일 생성 후 아래의 요소 추가
/node_modules/
/dist/
/.parcel-cache/
```

#### ESLint 설정

* vscode extention eslint 설치

* .vscode 폴더 생성 (mkdir .vscode)

* settings.json file 생성 (.vscode 폴더 내부)

```terminal
{
  "editor.rulers": [
      80
  ],
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "trailing-spaces.trimOnSave": true
}
```

#### package.json 파일 수정

```terminal
"scripts": {
    "start": "parcel --port 8080",
    "build": "parcel build",
    "check": "tsc --noEmit",
    "lint": "eslint --fix --ext .js,.jsx,.ts,.tsx .",
    "test": "jest",
    "coverage": "jest --coverage --coverage-reporters html",
    "watch:test": "jest --watchAll"
  },
```
